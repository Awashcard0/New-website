<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link rel="stylesheet" href="https://fonts.xz.style/serve/inter.css">
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@exampledev/new.css@1.1.2/new.min.css">
    <title>Links</title>
    <!-- Home thing -->
    <link rel="stylesheet" href="https://awashcard0.pages.dev/home-thing/style.css">
    <script src='https://awashcard0.pages.dev/home-thing/script.js'></script>
    <!-- End home thing -->
    <link rel="stylesheet" href="https://fonts.googleapis.com/css2?family=Material+Symbols+Outlined:opsz,wght,FILL,GRAD@20..48,100..700,0..1,-50..200" />
    <style>
        #dialogCont {
            height: 300px;
            width: 1000px;
            text-align: center;
        }

        #dialogCont a, #dialogCont p {
            font-size: 30px;
        }
    </style>
</head>
<body>
    <header>
        <h1>Links</h1>
        <p>There isn't much to do here at the moment but this might have more things in the future</p>
    </header>
    <main>
        <h2>What is this?</h2>
        <p>This is currently the back end to my URL shortener if you want to test it I'll show you how.</p>
        <h4>Testing</h4>
        <p>Go to <code><a href="/o/test">awashcard0.com/o/test</a></code></p>
        <p>Go to <code><a href="/o/testlink">awashcard0.com/o/testlink</a></code></p>
    </main>
    <dialog id="dialog">
        <div id="dialogCont">
            
        </div>
    </dialog>
</body>
<script>
const crypto = window.crypto;

    if (location.href.includes("#id=")) {
        // Found url

        // Get id
        const stupidSchoolBlocker = location.href.split("#id=")[1];
        const id = stupidSchoolBlocker.split("?")[0]; // It hates my website so it puts a quary at the end of it
        let output = false
        const dialog = document.getElementById("dialog");
        const dialogCont = document.getElementById("dialogCont");

        // check if its a public id
        if (id === "test") {
            output = {
                "type": "text",
                "data": "This is the test id"
            }
        } else if (id === "testlink") {
            output = {
                "type": "link",
                "data": "https://awashcard0.com"
            }
        } else if (id === "doc") {
            output = {
                "type": "link",
                "data": "https://nas.awashcard0.com/d/s/woVtJBfgCl4koeSxkd9Jiqtx7GAlQYdS/Zce_AQy2c7nSzuLODxuy1lLkee0tmlkA-JbIAgw2aDAs"
            }
        } else if (id === "git") {
            output = {
                "type": "link",
                "data": "https://nextcloud.awashcard0.com/s/QcLe7iePszYEpJn"
            }
        } else if (id === "historicalContext") {
            output = {
                "type": "link",
                "data": "https://docs.google.com/document/d/1DjnE-i9c_M5Pgd1KQMgrHGybtHBl0FilMHY9-HsFUhk/edit?usp=sharing"
            }
        } else { {
            output = {
                "type": "error",
                "data": "<h2>This is not a link</h2>"
            }
        }
    }

        if (output.type == "text") {
            dialog.showModal();
            dialogCont.innerHTML = `
            <h1>This is a text link</h1>
            <br>
            <p>${output.data}</p>
            `;
        } else if (output.type == "link") {
            dialog.showModal();
            dialogCont.innerHTML = `
            <h1>This is a link</h1>
            <br>
            <a href="${output.data}">This link goes to ${output.data} (Click to open)</a>
            `;
        } else if (output.type == "error") {
            dialog.showModal();
            dialogCont.innerHTML = `
            <h1>There was an error</h1>
            <br>
            ${output.data}
            `;
        }
    }
</script>
<style>
    dialog, dialog h1 {
        color: black;
        margin: auto;
    }
</style>
</html>